CREATE TABLE IF NOT EXISTS artist(
  ArtistID INT NOT NULL AUTO_INCREMENT,
  ArtistType ENUM('PERSON', 'BAND') NULL DEFAULT NULL,
  PRIMARY KEY (ArtistID));

CREATE TABLE IF NOT EXISTS band(
  BandID INT NOT NULL AUTO_INCREMENT,
  BandName VARCHAR(50) NULL DEFAULT "unknown",
  FormationDate DATE NULL DEFAULT NULL,
  DisbandDate DATE NULL DEFAULT NULL,
  ArtistID INT NOT NULL,
  PRIMARY KEY (BandID),
   CONSTRAINT ArtistID1
  FOREIGN KEY(ArtistID)
  REFERENCES artist(ArtistID)
   ON DELETE CASCADE
    ON UPDATE CASCADE
  );

CREATE TABLE IF NOT EXISTS person(
  PersonID INT NOT NULL AUTO_INCREMENT,
  FirstName VARCHAR(50) NOT NULL,
  LastName VARCHAR(80) NOT NULL,
  BirthDate DATE ,
  Country VARCHAR(30) NULL DEFAULT "unknown",
  Alias VARCHAR(50) NULL DEFAULT "unknown",
  isSoloArtist TINYINT NULL ,
  ArtistID INT NOT NULL ,
  PRIMARY KEY (PersonID),
  CONSTRAINT ArtistID2
    FOREIGN KEY (ArtistID)
    REFERENCES artist(ArtistID)
    ON DELETE CASCADE
    ON UPDATE CASCADE);

CREATE TABLE IF NOT EXISTS bandmember(
  BandID INT NOT NULL,
  PersonID INT NOT NULL ,
  FromDate DATE NOT NULL,
  ToDate DATE ,
  PRIMARY KEY (PersonID,BandID,FromDate),
  CONSTRAINT BandID
    FOREIGN KEY (BandID)
    REFERENCES band(BandID)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT PersonID
    FOREIGN KEY (PersonID)
    REFERENCES person(PersonID)
    ON DELETE CASCADE
    ON UPDATE CASCADE);

CREATE TABLE IF NOT EXISTS genre(
  GenreID INT NOT NULL AUTO_INCREMENT,
  GenreName VARCHAR(30) NULL DEFAULT "unknown",
  PRIMARY KEY (GenreID)
  );

CREATE TABLE IF NOT EXISTS producer(
ProducerID INT NOT NULL AUTO_INCREMENT,
FirstName VARCHAR(50) NULL DEFAULT "unknown",
LastName VARCHAR(80) NULL DEFAULT "unknown",
NumofProdAlbums INT NOT NULL,
PRIMARY KEY (ProducerID)
);

CREATE TABLE IF NOT EXISTS recordcompany(
CompanyID INT NOT NULL AUTO_INCREMENT,
CompanyName VARCHAR(80) NULL DEFAULT "unknown",
Adress VARCHAR(150) NULL DEFAULT "unknown",
Phone VARCHAR(20) NULL DEFAULT "unknown",
Email VARCHAR(40) NULL DEFAULT "unknown",
BeginDate DATE,
EndDate DATE,
PRIMARY KEY (CompanyID)
);

CREATE TABLE IF NOT EXISTS producercompany(
ProducerID INT NOT NULL ,
RecordCompanyID INT NOT NULL,
FromDate DATE,
ToDate DATE,
PRIMARY KEY(ProducerID,RecordCompanyID,FromDate),
CONSTRAINT CompanyID1
      FOREIGN KEY (RecordCompanyID)
 REFERENCES recordcompany(CompanyID)
  ON DELETE CASCADE
  ON UPDATE CASCADE,
  CONSTRAINT ProducerID1
  FOREIGN KEY (ProducerID)
 REFERENCES producer(ProducerID)
  ON DELETE CASCADE
  ON UPDATE CASCADE
);

CREATE TABLE IF NOT EXISTS artistcompany(
  ArtistID INT NOT NULL AUTO_INCREMENT,
  CompanyID INT NOT NULL,
  FromDate DATE NOT NULL,
  ToDate DATE NULL,
  PRIMARY KEY (ArtistID, CompanyID, FromDate),
  CONSTRAINT ArtistID3
  FOREIGN KEY (ArtistID)
  REFERENCES artist(ArtistID)
   ON DELETE CASCADE
    ON UPDATE CASCADE,
	CONSTRAINT CompanyID2
	FOREIGN KEY (CompanyID)
 REFERENCES recordcompany(CompanyID)
  ON DELETE CASCADE
  ON UPDATE CASCADE);

CREATE TABLE IF NOT EXISTS album(
  AlbumID INT NOT NULL AUTO_INCREMENT,
  Title VARCHAR(100) NOT NULL,
  ArtistID INT NOT NULL,
  GenreID INT NOT NULL,
  CompanyID INT NOT NULL,
  ProducerID INT NOT NULL,
  PRIMARY KEY (AlbumID),
    CONSTRAINT GenreID
    FOREIGN KEY (GenreID)
    REFERENCES genre(GenreID)
     ON DELETE CASCADE
    ON UPDATE CASCADE,
    CONSTRAINT ArtistID
  FOREIGN KEY (ArtistID)
  REFERENCES artist(ArtistID)
   ON DELETE CASCADE
    ON UPDATE CASCADE,
    CONSTRAINT ProducerID
    FOREIGN KEY(ProducerID)
    REFERENCES producer(ProducerID)
     ON DELETE CASCADE
    ON UPDATE CASCADE,
    CONSTRAINT CompanyID
    FOREIGN KEY(CompanyID)
    REFERENCES recordcompany(CompanyID)
     ON DELETE CASCADE
    ON UPDATE CASCADE
    );

CREATE TABLE IF NOT EXISTS albumrelease(
  ReleaseID INT NOT NULL AUTO_INCREMENT,
  AlbumID INT NOT NULL,
  ReleaseDate DATE NULL DEFAULT NULL,
  ReleaseType ENUM('LP', 'CD', 'MP3') NULL DEFAULT NULL,
  ReleaseStatus ENUM('OFFICIAL', 'PROMOTION', 'BOOTLEG', 'WITHDRAWN', 'CANCELED') NULL DEFAULT NULL,
  Packaging ENUM('BOOK', 'CARDBOARD SLEEVE', 'DIGIPAK', 'JEWEL CASE', 'NA') NULL DEFAULT NULL,
  PRIMARY KEY (ReleaseID),
   CONSTRAINT AlbumID
      FOREIGN KEY (AlbumID)
 REFERENCES album(AlbumID)
  ON DELETE CASCADE
    ON UPDATE CASCADE);

CREATE TABLE If NOT EXISTS track(
TrackID INT NOT NULL AUTO_INCREMENT,
Title VARCHAR(100) NULL DEFAULT"unknown",
AlbumID INT NOT NULL ,
TrackLength TIME NOT NULL,
TrackNo INT NOT NULL ,
Lyrics TEXT NULL,
PRIMARY KEY(TrackID),
 CONSTRAINT AlbumID1
      FOREIGN KEY (AlbumID)
 REFERENCES album(AlbumID)
  ON DELETE CASCADE
  ON UPDATE CASCADE
);